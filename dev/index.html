<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · AtomisticComposableWorkflows</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>AtomisticComposableWorkflows</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Atomistic-composable-workflows"><span>Atomistic composable workflows</span></a></li><li><a class="tocitem" href="#Atomistic-suite-for-CESMIX-in-Julia"><span>Atomistic suite for CESMIX in Julia</span></a></li><li><a class="tocitem" href="#Case-studies"><span>Case studies</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cesmix-mit/AtomisticComposableWorkflows/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="[WIP]-Atomistic-Composable-Workflows"><a class="docs-heading-anchor" href="#[WIP]-Atomistic-Composable-Workflows">[WIP] Atomistic Composable Workflows</a><a id="[WIP]-Atomistic-Composable-Workflows-1"></a><a class="docs-heading-anchor-permalink" href="#[WIP]-Atomistic-Composable-Workflows" title="Permalink"></a></h1><p>The Center for the Exascale Simulation of Materials in Extreme Environments (<a href="https://computing.mit.edu/cesmix/">CESMIX</a>) is a new MIT research effort to advance the state-of-the-art in predictive simulation. It seeks to connect quantum and molecular simulations of materials with state-of-the-art programming languages, compiler technologies, and software performance engineering tools, underpinned by rigorous approaches to statistical inference and uncertainty quantification.</p><p>This repository aims to gather easy-to-use CESMIX-aligned case studies, integrating the latest developments of the Julia atomistic ecosystem with state-of-the-art tools. This is a work in progress and is not ready for production, however some of our examples can already be used.</p><hr/><hr/><h2 id="Atomistic-composable-workflows"><a class="docs-heading-anchor" href="#Atomistic-composable-workflows">Atomistic composable workflows</a><a id="Atomistic-composable-workflows-1"></a><a class="docs-heading-anchor-permalink" href="#Atomistic-composable-workflows" title="Permalink"></a></h2><p>A series of composable workflows is guiding our design and development. We analyzed three of the most representative workflows: classical MD, Ab initio MD, and classical MD with active learning. </p><p><img src="assets/composable_workflows.png" alt="Atomistic Composable Workflows"/></p><ul><li>CW1 describes  the  software  components  and  relationships  of  a  classical  MD  simulation. Essentially, at each time step, the force associated with each atom is calculated based on the interatomic potential, and then used to calculate each new atomic position.</li></ul><p>The correct functioning of the calculators is analyzed and reported, via the curved arrow components to the dynamics model or control component.  E.g. a UQ analysis is performed on the force and MD calculations so that the control module can take corrective action.   In addition, a composable design must guarantee the communication of all the processes, for this purpose  &quot;wrapper&quot;  components,  represented  by  small circles in the figure, are included in the design. The wrappers are key in this design because they allow  heterogeneous  software  to  coexist  in  the  same workflow.  Each wrapper implements a set of interfaces associated  with a  particular  component. </p><ul><li>CW2 depicts an Ab initio MD process.  It is mostly analogous  to  the  workflow described above,  but  in this  case  the  force  calculation  is  provided  by  a  DFT simulation.</li><li>CW3 presents a combination of the latter workflows.  Here, potentials/forces are fitted with respect  to  the  data  generated  by  the  DFT  simulator. The fitting process is complex and therefore requires a dedicated software component, as well as analysis of its inputs in terms of error, sensitivity, etc.  Furthermore,  the  dynamics model component,  based  on the analysis of the potential, forces and molecular dynamics,  can  re-fit these  forces  in  a  process called active learning.</li></ul><hr/><hr/><h2 id="Atomistic-suite-for-CESMIX-in-Julia"><a class="docs-heading-anchor" href="#Atomistic-suite-for-CESMIX-in-Julia">Atomistic suite for CESMIX in Julia</a><a id="Atomistic-suite-for-CESMIX-in-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Atomistic-suite-for-CESMIX-in-Julia" title="Permalink"></a></h2><p>This composable approach allowed us to characterize each software component involved, which can be associated with one or more atomistic tools, as well as their interactions with other components. In particular, an increasing number of Julia packages dedicated to atomistic simulations are currently being developed. These packages combine the dynamic and interactive nature of Julia with its high-performance capabilities.</p><p><img src="assets/workflow3.png" alt="Atomistic Composable Workflow 3"/></p><ul><li><a href="https://github.com/JuliaMolSim/AtomsBase.jl">AtomsBase.jl</a> is a lightweight abstract interface for representation of atomic geometries. It helps in the operability of diverse atomistic tools. Furthermore, <a href="https://github.com/mfherbst/AtomIO.jl">AtomIO.jl</a> is a standard IO package for atomic structures integrating with FileIO, AtomsBase, and others.</li><li><a href="https://docs.dftk.org/stable/">DFTK.jl</a>, the density-functional toolkit, is a library for playing with plane-wave density-functional theory (DFT) algorithms. In its basic formulation it solves periodic Kohn-Sham equations.</li><li><a href="https://github.com/cesmix-mit/InteratomicPotentials.jl">InteratomicPotentials.jl</a> and <a href="https://github.com/cesmix-mit/InteratomicBasisPotentials.jl">InteratomicBasisPotentials.jl</a> are responsible for providing the methods to calculate the energies, forces and virial tensors of the potentials that we use in CESMIX.</li><li><a href="https://github.com/cesmix-mit/PotentialLearning.jl">PotentialLearning.jl</a> aims to facilitate active learning of interatomic potentials in atomistic simulations of materials incroporating elements of bayesian inference and machine learning.</li><li><a href="https://github.com/cesmix-mit/Atomistic.jl">Atomistic.jl</a> provides an integrated workflow for MD simulations.</li><li><a href="https://github.com/cesmix-mit/LAMMPS.jl">LAMMPS.jl</a> provides the bindings to the LAMMPS API, allowing other modules to access interatomic potentials, such as SNAP.</li></ul><hr/><hr/><h2 id="Case-studies"><a class="docs-heading-anchor" href="#Case-studies">Case studies</a><a id="Case-studies-1"></a><a class="docs-heading-anchor-permalink" href="#Case-studies" title="Permalink"></a></h2><p>Listed here is a subset of the case studies we are developing. We are gradually adding new cases as well as improving and increasing the complexity of the current ones.</p><table><tr><th style="text-align: center">CW</th><th style="text-align: center">Type</th><th style="text-align: center">DFT</th><th style="text-align: center">UQ</th><th style="text-align: center">Fitting/ Learning</th><th style="text-align: center">Potential / Forces</th><th style="text-align: center">Molecular Dynamics</th><th style="text-align: right">Location</th></tr><tr><td style="text-align: center">1</td><td style="text-align: center">Ar</td><td style="text-align: center"></td><td style="text-align: center">✓</td><td style="text-align: center">✓</td><td style="text-align: center">InteratomicPotentials.jl → Lennard Jones / ACE</td><td style="text-align: center">LAMMPS.jl → LAMMPS</td><td style="text-align: right">Current repo</td></tr><tr><td style="text-align: center">1</td><td style="text-align: center">Ar</td><td style="text-align: center"></td><td style="text-align: center">✓</td><td style="text-align: center">✓</td><td style="text-align: center">InteratomicPotentials.jl → LennardJones / ACE</td><td style="text-align: center">Atomistic.jl → Molly.jl</td><td style="text-align: right">Current repo</td></tr><tr><td style="text-align: center">1</td><td style="text-align: center">Ar</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">InteratomicPotentials.jl → LennardJones</td><td style="text-align: center">Atomistic.jl → Molly.jl</td><td style="text-align: right"><a href="https://github.com/cesmix-mit/Atomistic.jl/blob/main/examples/argon/molly_lj_simulation.jl">Atomistic.jl repo</a></td></tr><tr><td style="text-align: center">1</td><td style="text-align: center">Na</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">LAMMPS.jl → EAM</td><td style="text-align: center">LAMMPS.jl  → LAMMPS</td><td style="text-align: right">Current repo</td></tr><tr><td style="text-align: center">3</td><td style="text-align: center">Na</td><td style="text-align: center">DFTK.jl</td><td style="text-align: center">✓</td><td style="text-align: center">✓</td><td style="text-align: center">InteratomicPotentials.jl  → SNAP / ACE</td><td style="text-align: center">LAMMPS.jl  → LAMMPS</td><td style="text-align: right">Current repo</td></tr><tr><td style="text-align: center">3</td><td style="text-align: center">HfO2 , a-HfO2, TiO2, etc.</td><td style="text-align: center">Multiple sources</td><td style="text-align: center"></td><td style="text-align: center">✓</td><td style="text-align: center">InteratomicPotentials.jl → ACE</td><td style="text-align: center">Atomistic.jl → Molly.jl</td><td style="text-align: right">Current repo</td></tr></table><p>Atomistic.jl also provides abstractions for using NBodySimulator.jl, however we are currently focusing on Molly.jl, which provides more flexibility.</p><p>Examples of use can be found on the websites or github repositories of each tool mentioned.</p><hr/><hr/><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><p>In the folder <code>ACE</code>, you will find a basic integrated example that allows you to fit different DFT datasets using ACE, run multiple serial/parallel fitting experiments, and run an MD simulation.</p><h3 id="Chose-a-DFT-dataset"><a class="docs-heading-anchor" href="#Chose-a-DFT-dataset">Chose a DFT dataset</a><a id="Chose-a-DFT-dataset-1"></a><a class="docs-heading-anchor-permalink" href="#Chose-a-DFT-dataset" title="Permalink"></a></h3><p>Choose a DFT dataset. Currently, this code accepts either two <code>xyz</code> files, one for training and one for testing, or a single <code>xyz</code> file, which is automatically split into training and testing. Example datasets can be downloaded from the following urls.</p><ul><li>a-HfO2 dataset: &quot;Machine-learned interatomic potentials by active learning: amorphous and liquid hafnium dioxide&quot;. Ganesh Sivaraman, Anand Narayanan Krishnamoorthy, Matthias Baur, Christian Holm, Marius Stan, Gábor Csányi, Chris Benmore &amp; Álvaro Vázquez-Mayagoitia. DOI: 10.1038/s41524-020-00367-7. <a href="https://github.com/argonne-lcf/active-learning-md/tree/master/data">Dataset url</a></li><li>FitSNAP: A Python Package For Training SNAP Interatomic Potentials for use in the LAMMPS molecular dynamics package. <a href="https://github.com/FitSNAP/FitSNAP/tree/master/examples">Datasets url</a></li><li>CESMIX training data repository. <a href="https://github.com/cesmix-mit/TrainingData">Datasets url</a></li></ul><h3 id="Fit-ACE"><a class="docs-heading-anchor" href="#Fit-ACE">Fit ACE</a><a id="Fit-ACE-1"></a><a class="docs-heading-anchor-permalink" href="#Fit-ACE" title="Permalink"></a></h3><p>The input parameters are listed below:</p><table><tr><th style="text-align: right">Input parameter</th><th style="text-align: right">Description</th><th style="text-align: right">E.g.</th></tr><tr><td style="text-align: right">experiment_path</td><td style="text-align: right">Experiment path</td><td style="text-align: right">TiO2/</td></tr><tr><td style="text-align: right">dataset_path</td><td style="text-align: right">Dataset path</td><td style="text-align: right">data/</td></tr><tr><td style="text-align: right">trainingset_filename</td><td style="text-align: right">Training datasets filename</td><td style="text-align: right">TiO2trainingset.xyz</td></tr><tr><td style="text-align: right">testset_filename</td><td style="text-align: right">Test datasets filename</td><td style="text-align: right">TiO2testset.xyz</td></tr><tr><td style="text-align: right">n<em>train</em>sys</td><td style="text-align: right">No. of atomic configurations in training dataset</td><td style="text-align: right">80</td></tr><tr><td style="text-align: right">n<em>test</em>sys</td><td style="text-align: right">No. of atomic configurations in test dataset</td><td style="text-align: right">20</td></tr><tr><td style="text-align: right">n_body</td><td style="text-align: right">Body order</td><td style="text-align: right">3</td></tr><tr><td style="text-align: right">max_deg</td><td style="text-align: right">Maximum polynomial degree</td><td style="text-align: right">3</td></tr><tr><td style="text-align: right">r0</td><td style="text-align: right">An estimate on the nearest-neighbour distance for scaling</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right">rcutoff</td><td style="text-align: right">Outer cutoff radius</td><td style="text-align: right">5.0</td></tr><tr><td style="text-align: right">wL</td><td style="text-align: right">See run-experiments.jl</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right">csp</td><td style="text-align: right">See run-experiments.jl</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right">w_e</td><td style="text-align: right">Energy weight</td><td style="text-align: right">1.0</td></tr><tr><td style="text-align: right">w_f</td><td style="text-align: right">Force weight</td><td style="text-align: right">1.0</td></tr></table><p>Run fitting process</p><pre><code class="language-shell hljs">    $ julia fit-ace.jl  experiment_path         TiO2/ \
                        dataset_path            data/ \
                        trainingset_filename    TiO2trainingset.xyz \
                        testset_filename        TiO2testset.xyz \
                        n_train_sys             80 \
                        n_test_sys              20 \
                        n_body                  3 \
                        max_deg                 3 \
                        r0                      1.0 \
                        rcutoff                 5.0 \
                        wL                      1.0 \
                        csp                     1.0 \
                        w_e                     1.0 \
                        w_f                     1.0</code></pre><p>In addition, you can run the experiments with the default parameters (the parameters shown above).</p><pre><code class="language-shell hljs">    $ julia fit-ace.jl</code></pre><h3 id="Run-multiple-fitting-experiments-in-serial/parallel-using-the-wrapper-to-ACE1.jl-in-InteratomicBasisPotentials.jl"><a class="docs-heading-anchor" href="#Run-multiple-fitting-experiments-in-serial/parallel-using-the-wrapper-to-ACE1.jl-in-InteratomicBasisPotentials.jl">Run multiple fitting experiments in serial/parallel using the wrapper to ACE1.jl in InteratomicBasisPotentials.jl</a><a id="Run-multiple-fitting-experiments-in-serial/parallel-using-the-wrapper-to-ACE1.jl-in-InteratomicBasisPotentials.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Run-multiple-fitting-experiments-in-serial/parallel-using-the-wrapper-to-ACE1.jl-in-InteratomicBasisPotentials.jl" title="Permalink"></a></h3><p>Modify the file <code>run-experiments.jl</code> to specify the parameter ranges needed to generate the experiments. E.g.</p><pre><code class="language-julia hljs">    # Parallel execution. Warning: a high number of parallel experiments may degrade system performance.
    parallel = true

    # n_body: body order. N: correlation order (N = n_body - 1)
    n_body = 2:5

    # max_deg: maximum polynomial degree
    max_deg = 3:6</code></pre><p>Run the script:</p><pre><code class="language-shell hljs">    $ julia run-experiments.jl</code></pre><p>Each experiment is run in a separate process (using <code>nohup</code> to facilitate its execution in a cluster). The results are stored in the folder <code>experiments/</code>. After all experiments have been completed, run the following script to gather the results into a single csv.</p><pre><code class="language-shell hljs">    $ ./gather-results.sh</code></pre><h3 id="Run-an-MD-simulation-using-the-wrapper-to-Molly.jl-or-NBodySimulator.jl-in-Atomistic.jl"><a class="docs-heading-anchor" href="#Run-an-MD-simulation-using-the-wrapper-to-Molly.jl-or-NBodySimulator.jl-in-Atomistic.jl">Run an MD simulation using the wrapper to Molly.jl or NBodySimulator.jl in Atomistic.jl</a><a id="Run-an-MD-simulation-using-the-wrapper-to-Molly.jl-or-NBodySimulator.jl-in-Atomistic.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Run-an-MD-simulation-using-the-wrapper-to-Molly.jl-or-NBodySimulator.jl-in-Atomistic.jl" title="Permalink"></a></h3><pre><code class="language-shell hljs">    $ run-md-ahfo2-ace-nbs.jl</code></pre><p>or</p><pre><code class="language-shell hljs">    $ run-md-ahfo2-ace-molly.jl</code></pre><p>(Note: currently there is a bug in the second script) </p><hr/><hr/><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><h3 id="Install-Julia-on-Ubuntu"><a class="docs-heading-anchor" href="#Install-Julia-on-Ubuntu">Install Julia on Ubuntu</a><a id="Install-Julia-on-Ubuntu-1"></a><a class="docs-heading-anchor-permalink" href="#Install-Julia-on-Ubuntu" title="Permalink"></a></h3><p>Open terminal and download Julia from https://julialang.org/downloads/</p><pre><code class="language-shell hljs">    $ wget https://julialang-s3.julialang.org/bin/linux/x64/1.7/julia-1.7.3-linux-x86_64.tar.gz</code></pre><p>Extract file</p><pre><code class="language-shell hljs">    $ tar xvzf julia-1.7.3-linux-x86_64.tar.gz</code></pre><p>Copy to <code>/opt</code> and create link</p><pre><code class="language-shell hljs">    $ sudo mv  ./julia-1.7.3 /opt/
    $ sudo ln -s /opt/julia-1.7.3/bin/julia /usr/local/bin/julia</code></pre><p>Alternative: add line to <code>.shellrc</code></p><pre><code class="language-shell hljs">    $ nano .shellrc
    PATH=$PATH:/home/youruser/julia-1.7.3 /bin/</code></pre><p>Restart the terminal</p><h3 id="Clone-repository,-add-registries,-and-install-dependencies"><a class="docs-heading-anchor" href="#Clone-repository,-add-registries,-and-install-dependencies">Clone repository, add registries, and install dependencies</a><a id="Clone-repository,-add-registries,-and-install-dependencies-1"></a><a class="docs-heading-anchor-permalink" href="#Clone-repository,-add-registries,-and-install-dependencies" title="Permalink"></a></h3><p>Clone repository iin your work directory</p><pre><code class="language-shell hljs">    $ git clone https://github.com/cesmix-mit/AtomisticComposableWorkflows.git</code></pre><p>Open a Julia REPL</p><pre><code class="language-shell hljs">    $ julia</code></pre><p>Add registries: General, CESMIX, and MolSim. Type <code>[</code>, then:</p><pre><code class="language-julia hljs">    pkg&gt; registry add https://github.com/JuliaRegistries/General
    pkg&gt; registry add https://github.com/cesmix-mit/CESMIX.git 
    pkg&gt; registry add https://github.com/JuliaMolSim/MolSim.git</code></pre><p>Activate and instantiate</p><pre><code class="language-julia hljs">    pkg&gt; activate .
    pkg&gt; instantiate</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Friday 26 August 2022 01:23">Friday 26 August 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
